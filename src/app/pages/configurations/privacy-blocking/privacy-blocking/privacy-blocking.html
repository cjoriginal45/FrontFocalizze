<app-header></app-header>

<div class="page-wrapper">
  <div class="settings-container">
    <div class="settings-header">
        <button mat-icon-button (click)="goBack()" class="back-button" aria-label="Volver">
          <mat-icon class="arrow-icon">arrow_back</mat-icon>
        </button>
      <h2 class="header-title">Bloqueo y Privacidad</h2>
    </div>

    <main class="content-area">
      <div class="subsection">
        <h4 class="subsection-label">Usuarios bloqueados:</h4>

        <div class="blocked-list-container">
          <div class="custom-scroll-box">
            @for (user of blockedUsers(); track user.id) {
            <div
              class="blocked-user-row"
              [class.selected]="selectedUsernames.has(user.username)"
              (click)="toggleSelection(user.username)"
            >
              <img [src]="user.avatarUrl" class="user-avatar" alt="Avatar" />
              <div class="user-info">
                <span class="display-name">{{ user.displayName }}</span>
                <span class="username">@{{ user.username }}</span>
              </div>
            </div>
            } @empty { @if (!isLoading()) {
            <p class="empty-list-message">No tienes usuarios bloqueados.</p>
            } } @if (isLoading()) {
            <p class="loading-message">Cargando...</p>
            }
          </div>
        </div>
      </div>

      <!-- BotÃ³n de desbloqueo que aparece solo si hay usuarios seleccionados -->
      @if (selectedUsernames.size > 0) {
      <div class="unblock-action-bar">
        <button class="btn-unblock" (click)="unblockSelectedUsers()">
          Desbloquear ({{ selectedUsernames.size }})
        </button>
      </div>
      }
    </main>
  </div>
</div>

<app-botton-nav></app-botton-nav>
