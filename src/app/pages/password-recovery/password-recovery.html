<section class="password-recovery">
  <header class="password-recovery__header">
    <div class="header__logo">
      <img src="assets/images/focalizze-logo-short.webp" alt="Focalizze" />
    </div>
    <div class="header__title">Donde menos es más</div>
  </header>

  <!-- VISTA 1: Solicitar Email -->
  @if (view === 'request') {
    <div class="password-recovery__panel">
      <h1 class="password-recovery__title">{{ 'PASSWORD_RECOVERY.TITLE_REQUEST' | translate }}</h1>
      <p class="password-recovery__subtitle">
        {{ 'PASSWORD_RECOVERY.SUBTITLE_REQUEST' | translate }}
      </p>
      <input
        class="password-recovery__input"
        type="email"
        placeholder="Ingrese su Correo Electrónico"
        [(ngModel)]="email"
        (keyup.enter)="requestReset()"
        [disabled]="isLoading"
      />
      <button class="password-recovery__button" (click)="requestReset()" [disabled]="isLoading">
        {{ (isLoading ? 'PASSWORD_RECOVERY.BUTTON_SENDING' : 'PASSWORD_RECOVERY.BUTTON_SEND') | translate }}
      </button>
      <a routerLink="/login" class="password-recovery__link">
        {{ 'PASSWORD_RECOVERY.LINK_BACK' | translate }} <span>{{ 'PASSWORD_RECOVERY.LINK_CLICK_HERE' | translate }}</span>
      </a>
    </div>
  }

  <!-- VISTA 2: Ingresar Nueva Contraseña -->
  @if (view === 'reset') {
    <div class="password-recovery__panel">
      <h1 class="password-recovery__title">{{ 'PASSWORD_RECOVERY.TITLE_RESET' | translate }}</h1>
      <input
        class="password-recovery__input"
        type="password"
        [placeholder]="'PASSWORD_RECOVERY.PLACEHOLDER_NEW_PASS' | translate"
        [(ngModel)]="newPassword"
        [disabled]="isLoading"
      />
      <input
        class="password-recovery__input"
        type="password"
        [placeholder]="'PASSWORD_RECOVERY.PLACEHOLDER_CONFIRM_PASS' | translate"
        [(ngModel)]="confirmPassword"
        (keyup.enter)="resetPassword()"
        [disabled]="isLoading"
      />
      <button class="password-recovery__button btn-wide" (click)="resetPassword()" [disabled]="isLoading">
        {{ (isLoading ? 'PASSWORD_RECOVERY.BUTTON_RESETTING' : 'PASSWORD_RECOVERY.BUTTON_RESET') | translate }}
      </button>
      @if (errorMessage) { <p class="error-message">{{ errorMessage }}</p> }
    </div>
  }

  <!-- VISTAS DE ESTADO -->
  @if (view === 'email_sent') {
    <div class="password-recovery__panel feedback-panel">
      <h2>{{ 'PASSWORD_RECOVERY.EMAIL_SENT_TITLE' | translate }}</h2>
      <p>{{ 'PASSWORD_RECOVERY.EMAIL_SENT_MSG' | translate:{email: email} }}</p>
    </div>
  }
  @if (view === 'invalid_token') {
    <div class="password-recovery__panel feedback-panel">
      <h2>{{ 'PASSWORD_RECOVERY.INVALID_TITLE' | translate }}</h2>
      <p>{{ 'PASSWORD_RECOVERY.INVALID_MSG' | translate }}</p>
      <a routerLink="/password-recovery" class="password-recovery__button">{{ 'COMMON.BACK' | translate }}</a>
    </div>
  }
  @if (view === 'success') {
    <div class="password-recovery__panel feedback-panel">
      <h2>{{ 'PASSWORD_RECOVERY.SUCCESS_TITLE' | translate }}</h2>
      <p>{{ 'PASSWORD_RECOVERY.SUCCESS_MSG' | translate }}</p>
    </div>
  }

  <p class="password-recovery__copyright">{{ 'FOOTER.COPYRIGHT' | translate }}</p>
</section>