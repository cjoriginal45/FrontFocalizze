<!-- === LÓGICA Y ESTRUCTURA SOLO PARA MÓVIL === -->
<div class="suggestions-mobile">
  
    <!-- Disparador que siempre está visible en móvil -->
    <button class="suggestions-mobile__trigger" (click)="toggleMobilePanel()" aria-label="Abrir/Cerrar sugerencias">
      <mat-icon>chevron_left</mat-icon>
    </button>
    
    <!-- Overlay que solo existe cuando el panel está abierto -->
    @if (isMobilePanelOpen) {
      <div class="suggestions-mobile__overlay" (click)="toggleMobilePanel()"></div>
    }
    
    <!-- El panel deslizable -->
    <aside class="suggestions-mobile__panel" [class.suggestions-mobile__panel--is-open]="isMobilePanelOpen">
      <!-- El contenido ahora se renderiza aquí -->
      <div class="suggestions-content">
        <!-- LLAMAMOS A UN TEMPLATE REUTILIZABLE -->
        <ng-container *ngTemplateOutlet="suggestionsContent"></ng-container>
      </div>
    </aside>
  
  </div>
  
  
  <!-- === ESTRUCTURA SOLO PARA ESCRITORIO === -->
  <aside class="suggestions-desktop">
    <!-- El contenido ahora se renderiza aquí -->
    <div class="suggestions-content">
      <!-- LLAMAMOS A UN TEMPLATE REUTILIZABLE -->
      <ng-container *ngTemplateOutlet="suggestionsContent"></ng-container>
    </div>
  </aside>

  <!-- === TEMPLATE DE CONTENIDO REUTILIZABLE === -->
<!-- Usamos ng-template para no duplicar el código del contenido -->
<ng-template #suggestionsContent>
  <div class="suggestions">
    <h2 class="suggestions__title">Tal vez te guste</h2>
    
    <!-- LÓGICA DE VISIBILIDAD: Muestra la lista completa o solo las sugerencias -->
    @if (showAllCategories) {
      <!-- Vista de "Todas las categorías" -->
      <ul class="suggestions__list suggestions__list--scrollable">
        @for (category of allCategories; track category.name) {
          <li class="suggestions__item">
            <span class="suggestions__name">{{ category.name }}</span>
            <button class="suggestions__button">Seguir</button>
          </li>
        }
      </ul>
      <a class="suggestions__see-more" (click)="toggleShowAllCategories()">Mostrar menos...</a>
    } @else {
      <!-- Vista de "Sugerencias" (3 aleatorias) -->
      <ul class="suggestions__list">
        @for (category of suggestedCategories; track category.name) {
          <li class="suggestions__item">
            <!-- Asignamos un icono genérico por ahora -->
            <mat-icon class="suggestions__icon">label</mat-icon>
            <span class="suggestions__name">{{ category.name }}</span>
            <button class="suggestions__button">Seguir</button>
          </li>
        }
      </ul>
      <a class="suggestions__see-more" (click)="toggleShowAllCategories()">Otras categorías...</a>
    }
  </div>

  <footer class="footer-links">
    <ul class="footer-links__list">
      <li class="footer-links__item"><a routerLink="/terms">Condiciones de Servicio</a></li>
      <li class="footer-links__item"><a routerLink="/privacy">Política de Privacidad</a></li>
      <li class="footer-links__item"><a routerLink="/cookies">Política de cookies</a></li>
      <li class="footer-links__item"><a routerLink="/accessibility">Accesibilidad</a></li>
      <li class="footer-links__item"><a routerLink="/more-options">Más opciones</a></li>
    </ul>
    <p class="footer-links__copyright">© 2025 Focalizze.</p>
  </footer>
</ng-template>